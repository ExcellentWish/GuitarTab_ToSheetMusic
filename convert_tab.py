from fret_mapping import fret_mappings_standard, fret_mapping_open_d_tuning ,fret_mapping_dad_tuning
from strings_order import standard_tuning, open_d_tuning, dad_tuning

def convert_tab_input(tab_input):
    # Split the input into lines
    lines = tab_input.strip().split('\n')

    # Initialize an empty list to store the converted lines
    converted_lines = []
    
    # Iterate through each line and convert fret numbers to note names
    for line_index, line in enumerate(lines):
        converted_line = ''
        string = dad_tuning[line_index % len(dad_tuning)]  # Cycle through strings_order based on line_index

        i = 0
        while i < len(line):
            char = line[i]

            if char.isdigit():
                fret = char
                while i + 1 < len(line) and line[i + 1].isdigit():
                    i += 1
                    fret += line[i]
                
                note = fret_mapping_dad_tuning[string].get(fret, '?')
                converted_line += note
            elif char in '-|':
                converted_line += char
            elif char in 'x': # For muteted notes
                converted_line += char    # For strum pattern
            elif char in 's': # For slide notes
                converted_line += char     
            elif char in '^':
                converted_line += char  
            elif char in '(':
                converted_line += char
            elif char in ')':
                converted_line += char
            elif char in 'p':
                converted_line += char               
            elif char in ':':
                converted_line += char  # For bend notes
            elif char in 'b':
                converted_line += char  # For pause notes
            elif char in '.':
                converted_line += char           
            elif char == 'h':
                converted_line += char
                i += 1  # Skip the next character as it's part of the hammer-on notation
                continue
            else:
                # For other notations or errors, use a placeholder or the character itself
                converted_line += '?'

            i += 1

        converted_lines.append(converted_line)

    # Combine the converted lines into a single string
    result = '\n'.join(converted_lines)
    return result

# Example usage D A D G A D
tab_input_example = """
|---0---------0-------0-|-----0-----0-------0-------0-|
|-----------------------|-----------------------0-----|
|-2---------------2-----|---------------2-------------|
|---0---0---0-------0---|---0-----0-------0-------0---|
|-----------------------|-----------------------------|
|-0---0---0-----0-------|-0-----0-----0-------0-------|

|-------0-----0-------0-------0---|
|---------------------------------|
|---2-------------2-------2-------|
|-----0-----0-------0-------0-----|
|---------------------------------|
|-0-------0-----0-------0---------|

|-------0-----0-------0-------0-|
|-------------------------------|
|---2-------------2-------2-----|
|-----0-----0-------0-------0---|
|-------------------------------|
|-0-------0-----0-------0-------|

|-----------------0-------|------------0---!0----|
|-----0---0---0-----------|---0----0-----0-!0-^0-|
|---0-------0---------2---|----------------!0-^0-|
|-----------------0-----0-|----------0-----!0-^0-|
|-3-----2-----------------|-3----2-------0-!0-^0-|
|---------------0---0-----|----------------!0-^0-|

|-0-0-0-0-0-0-0-0-0-0-0-|---0-------0-------0---------|
|-0-0-0-0-0-0-0-0-0-0-0-|-----------------------------|
|-0-0-0-0-0-2-2-2-2-2-2-|-------2-------2-------2-----|
|-2---------2-----------|---0-----0-------0-----------|
|-0---------0-----------|-------------------------0---|
|-2---------------------|-0---0-------0-------0---0h2-|

|-0-0-0-0-0-0---0-0-0-0----|
|-0-0-0-0-0-0-0-0-0-0-0----|
|-0-0-0-0-0-0-2-2-2-2-2-2--|
|-2-----------2-2-2-2-2-2--|
|-0-----------0------------|
|-2------------------------|

|---0-------0-------0-------2-||-------0-------0-------0-------0-|
|-------------------0---------||---------------------------------|
|-------2-------2-------2-----||---2-------2-------2-------2-----|
|---0-----0---------------0---||-----0-------0-------0-------0---|
|-----------------0-----------||---------------------------------|
|-0---0-------0-------0-------||-0-------0-------0-------0-------|

|-------0-------0-------0-------0---|
|-----------------------------------|
|---2-------2-------2-------2-------|
|-----0-------0-------0-------0-----|
|-----------------------------------|
|-0-------0-------0-------0---------|

|-------0-------0-------0-------0-|
|---------------------------------|
|---2-------2-------2-------2-----|
|-----0-------0-------0-------0---|
|---------------------------------|
|-0-------0-------0-------0-------|

|-------0-------0-------0-------|-----0-----0---0-------|
|-------------------------------|-3-----0-----0---------|
|---2-------2-------2-------2---|---0---0-0---------2---|
|-----0-------0-------0---------|---------------0-----0-|
|-----------------------------0-|-3-----2-----0---------|
|-0-------0-------0-------0-----|-----------------0-----|

|-------------0---x-x-|-0-0-0-0-0-0-0-0-0-0-0-0-0-|
|---0-----0-----0-x-x-|-0-0-0-0-0-0-0-0-0-0-0-0-0-|
|-----0-----------x-x-|-0-0-0-0-0-0-2-2-2-2-2-2-2-|
|-----------0-----x-x-|-2---2-2-2-2-2-------------|
|-3-----2-------0-x-x-|-0---0-0-0-0-0-------------|
|-----------------x-x-|-2-----------2-------------|

|---0-------0-------0---------|
|---0---0-------0---------0-0-|
|---2---2---------2-------0-0-|
|---------0-------0-------2-2-|
|-0-----------------------0-0-|
|-0---0-------0-------0-0-2-2-|

|-0-0-0-0-0-0-0-0-0-0-0-0-0-|
|-0-0-0-0-0-0-0-0-0-0-0-0-0-|
|-0-0-0-0-0-0-2-2-2-2-2-2-2-|
|-2-----------2-------------|
|-0-----------0-------------|
|-2-----------2-------------|

|-------------0---------------||-----------------------0---|
|---------------------0-------||-------3---5---7-5-(5)-----|
|---------2-------2-------2---||-2p0---5---7---9-7-(7)-----|
|---0-------0-------0-------0-||--------------------0------|
|-0---x-----------------------||-----0-------0---0---------|
|-0-----0-------0-------0-----||-0-------0-----0---------0-|

|-----------------------0-------0-|-----------------------0---|
|---------------------------------|-------3---5---7-5-(5)-----|
|-5p0---2-(2)-(2)-0-2-------2-----|-2p0---5---7---9-7-(7)-----|
|--------------0------0-------0---|--------------------0------|
|-----0--------0------------------|-----0-------0---0---------|
|-0--------0------0-------0-------|-0-------0-----0---------0-|

|-----------------------0-------0---|
|-----------------------------------|
|-5p0---2-(2)-(2)-0-2-------2-------|
|--------------0------0-------0-----|
|-----0--------0--------------------|
|-0--------0------0-------0---------|

|-----------------------0-0---0-|----------------------0-------0-|
|-----------------------0-0-----|--------------------------------|
|-2p0---0-(0)-------2---2-2-----|-0h2p0---0-(0)-2----2-----2-2---|
|-------------2s4-----0---------|-------3-------0--0-------------|
|-----0-----------0---------0---|--------------------------------|
|-0--------0--------0---0-------|------------------0-----0-------|

|------------------------------------|
|------------------------------------|
|-0h2p0---0-(0)----------------------|
|-------3-------2--3-0h2p0-----------|
|---------------0----------3p0-------|
|------------------------------3b3.5-|

|---0-------0-------0---------|-------5-------7p5-------5-----|
|---------0-------------------|-5h8-------5---------8---------|
|-------2-2-----2-------0-(0)-|-----5-------5-----5-----------|
|---0-------------0--------0--|-0-------0-----0-----------0---|
|-----------------------------|-------------------------------|
|-0---0-------0-------0-------|-----0-------0---------0-------|

|-5h7p5-------5-------0-----------|
|---------8-----------------------|
|-------5-------5-2---2---2-------|
|-----------0---0-----0-----0-----|
|-----------------------0---------|
|-------------------0-------------|

|-------5-------7p5-------5-----|
|-5h8-------5---------8---------|
|-----5-------5-----5-----------|
|-0-------0-----0-------0---0---|
|-------------------------------|
|-----0-------0-----------------|

|-------10------------------------|---0-------0-------0---------|
|-/12--------12\---0h3p0----------|-----------------------0-----|
|-----0----------0--------2h5p2-3-|---2---2-------2---------0---|
|---0--------------0------0-------|---0-----0-------0-----------|
|---------------------------------|-----------------------------|
|----------0----------------------|-0---0-------0-------0-------|

|-7-0---0-------10---9-(9)-----|-7p0---0-(0)-----10p0---9---0---|
|-----------8--------------8---|-------------8------------------|
|-----9-------9----9---------9-|-----9---------9------9-------9-|
|---------0--------------------|-----0--------------------0-----|
|------------------------------|--------------------------------|
|-0--------------0-------------|-0--------0-------0-------------|

|--------7--------7p0------0------------|
|-8h10p8-----10p7-----10-------10-------|
|------9--------------------------------|
|----------0-------------0---0----0-0---|
|---------------------------------------|
|-0-------------------------------------|

|---0--------------------|---0-------0-------0-------0-|
|--------0---------------|-----------------------------|
|------------------------|-------2-------2-------2-----|
|---0--------------------|---0-----0-------0-------0---|
|-0--------0-0---0-------|-----------------------------|
|-0---0--------3---3b3.5-|-0---0-------0-------0-------|

|-----------------------0---------|
|-------0-------0---------------0-|
|---0-------0-------0-------0-----|
|-----5-------5-------5-------5---|
|---------------------------------|
|-5-------5-------5-------5-------|

|-----------------------0---------|---------------0---------------0-|
|-------0-------0---------------0-|-------0---------------0---------|
|---0-------0-------0-------0-----|---0-------0-------0-------0-----|
|-----3-------3-------3-------3---|-----4-------4-------4-------4---|
|---------------------------------|---------------------------------|
|-3-------3-------3-------3-------|-2-------2-------2-------2-------|

|---0-(0)-0-0-0--------------------|
|---0-(0)-0-0-0--------------------|
|---2-(2)-2-2-2--------------------|
|---0-(0)---0-0-0h2p0---0-2-3-2p0--|
|---------------------3------------|
|-0--------------------------------|

|---------------0-------0-||---0---------0-------|
|---0---0---0-------------||---------------------|
|---2---2-----2-----2-----||-----------------2---|
|-------0-------------0---||---0---0---0---------|
|-------------------------||---------------------|
|-0---0---0-------0-------||-0---0---0-----0---0-|

|-----0-----0-------0-------0--|
|------------------------------|
|---------------2-------2------|
|---0-----0-------0-------0----|
|------------------------------|
|-0-----0-----0-------0--------|

|-------0-----0-------0-------0-|
|-------------------------------|
|---2-------------2-------2-----|
|-----0-----0-------0-------0---|
|-------------------------------|
|-0-------0-----0-------0-------|

|-------0-----0-------0-------0-|-------------------0---------|
|-------------------------------|---0---0---0---0-------------|
|---2-------------2-------2-----|-----0-------0---------2-----|
|-----0-----0-------0-------0---|-------------------0-----0---|
|-------------------------------|-3-------2-------------------|
|-0-------0-----0-------0-------|-----------------0---0-------|

|------------0---!0----|-0-0-0-0-0-0-0-0-0-0---|---2p0-------2p0---0-----0-|
|---0----0-----0-!0-^0-|-0-0-0-0-0-0-0-0-0-0-0-|---------3-------------3p0-|
|----------------!0-^0-|-0-0-0-0-0-2-2-2-2-2---|-------2---------2---------|
|----------0-----!0-^0-|-2---------2-----------|---0-------0-0-------0-----|
|-3----2-------0-!0-^0-|-0---------0-----------|-0-------------------------|
|----------------!0-^0-|-2---------------------|---------------------------|

|-0-0-0-0-0-0---0-0-0-0---|---0-------0-------0---------||
|-0-0-0-0-0-0-0-0-0-0-0-0-|-----------------------------||
|-0-0-0-0-0-0-2-2-2-2-2---|-------2-------2-------2-----||
|-2-----------2-2-2-2-2---|---0-----0-------0---------0-||
|-0-----------0-----------|-----------------------------||
|-2-----------------------|-0---0-------0-------0-------||

|---------------------------------------------|
|-----------------2------------7--5-(5)-5-----|
|---2---5----------------------------0--------|
|---------------------------------------------|
|-----------0----(0)-(0)----------------------|
|---0--(0)---------------------0--0--------0--|

|------/8--(8)-8s10------10s12---10-----------|
|-/10-------------------------------------10--|
|---------------------------------------------|
|---------------------------------------------|
|---------------------------------------------|
|---------------------------------------------|

|------------------------0-----------|
|------------------------------------|
|-5-----2------0-----2---------2-----|
|-----------------0----0---------0---|
|----0-------------------------------|
|-0---------0--------0-----0---------|

|-8----------------------------------|
|------10-(10)-8----10-------/10-----|
|------------------------------------|
|------------------------------------|
|------------------------------------|
|------------------------------------|

|--------------------------------------------|------------------------0-----------|
|-----------------2------------7--5-(5)-5----|------------------------------------|
|---2---5----------------------------0-------|-5-----2------0-----2---------2-----|
|--------------------------------------------|-----------------0----0---------0---|
|-----------0----(0)-(0)---------------------|----0-------------------------------|
|---0--(0)---------------------0--0--------0-|-0---------0--------0-----0---------|

|------/8--(8)-8s10------10s12---10----------|-8----------------------------------|
|-/10-------------------------------------10-|------10-(10)-8----10-------/10-----|
|--------------------------------------------|------------------------------------|
|--------------------------------------------|------------------------------------|
|--------------------------------------------|------------------------------------|
|--------------------------------------------|------------------------------------|

|-0-----0-------------0-(0)-0--0---|-------------------0-0-|
|---0-------0-----0---0-(0)-0--0---|-0------0----------0-0-|
|-----0---------0-----2-(2)-2--2---|-2-----------------0-0-|
|---------------------0-(0)-0--0---|-----------0-----------|
|-3-------2-----------0-(0)--------|-3----2---------0------|
|-------------------0--------------|-----------------------|

|----------------------------------|-----------------------|
|-8S==7-8-----/10-----------8S10---|-8--6-8-6/---------8---|
|---------------------7------------|-------------7-(7)-----|
|----------------------------------|-----------------------|
|----------------------------------|-----------------------|
|----------------------------------|-----------------------|

|-0-----0--0-0----0---0-!0-0-0--0-0--0--|
|-0-----0--0-0----0---0-!0-0-0--0-0--0--|
|-0-----2--2-2----2---2-!2-2-2--2-2--2--|
|-2-----2--2-2----2---2-!2-2-2--2-2--2--|
|-0-------------------------------------|
|-2-------------------------------------|

|---------------------------------------|
|-8s10-10-10---10---8---10-8-6/---6/----|
|---------------------------------------|
|---------------------------------------|
|---------------------------------------|
|---------------------------------------|

|----0----------3p0---0-(0)-------|
|----------0-^0-------------------|
|------2-----^2-----2-------2p0---|
|----0-------^0-------------------|
|---------------0--------0--------|
|-0------0--------------------0---|

|---------------------------------|
|---------------------------6s8---|
|-7-------------------------------|
|---------------------------------|
|---------------------------------|
|---------------------------------|

|-0--------0--0-0-0-0--0--0-0-0-0-|----0-------------0-(0)-----0---||
|-0-----0--0--0-0-0-0--0--0-0-0-0-|------------0-------------------||
|-0-----0--2--2-2-2-2--2--2-2-2-2-|--------2---2-----------2-------||
|-2-----2-----------2--2--2-2-2-2-|----0-----0-----0---------0-----||
|-0-----------------0-------------|--------------------------------||
|-2-------------------------------|-0----0-------0------0----------||

|---------------------------------|--------------------------------||
|-8s10-10-10-10---7s8-(8)-6s==7---|--------------------------------||
|---------------------------------|-7------------------------------||
|---------------------------------|--------------------------------||
|---------------------------------|--------------------------------||
|---------------------------------|--------------------------------||

|-------0-------0-------0-------0-|----------------------------0--------0-|
|---------------------------------|-0-------------5---------7--0----0-----|
|---2-------2-------2-------2-----|--------5------7-------------------2---|
|-------------0-------0-------0---|-----------------0---------------------|
|-----0---------------------------|------0------------------0-------------|
|-0-------0-------0-------0-------|-0---------0----------------0--0-------|

|---------------------------------|--------8-(8)-10---10s12---10----------|
|---------------------------------|-8s10----------------------------------|
|---------------------------------|---------------------------------------|
|---------------------------------|---------------------------------------|
|---------------------------------|---------------------------------------|
|---------------------------------|---------------------------------------|

|--------------0-------0---0---0-----|
|----------------------0-------0-----|
|------5---2-------2-----2-----------|
|------------0-------0---------------|
|--------0-------0-------0---0---0---|
|---0----------------------------0---|

|-(10)-------------------------------|
|------------------------------------|
|------------------------------------|
|------------------------------------|
|------------------------------------|
|------------------------------------|

|----------------------0-------|------------------------------------|
|-5----------------------------|------------------------------------|
|-----5p4-0------0h2-------2---|---2p=0-------0---0h2p0-0-------0---|
|-0------------------0-------0-|--------3-3---------------3-(3)-----|
|---0------------------------0-|------------------------------------|
|-------0---0----0-------0-----|---0----0---0---0-0-----0----0----0-|

|-8-----7----------------------|------------------------------------|
|---------8---8s10-------------|-(10)-------------------------------|
|------------------------------|------------------------------------|
|------------------------------|------------------------------------|
|------------------------------|------------------------------------|
|------------------------------|------------------------------------|

|-----0-------0-(0)-----0--------^0--|
|-------------0-(0)---------0----^0--|
|-2-------2---------2---------!3-----|
|---0-------0---------0-------!0-----|
|------------------------------------|
|-0-----0--------0--------0----------|

|-------------------------------------|
|-------------------------------------|
|-0h2p0---0-0h2p0---0h2p0---0---------|
|-------3---------3-------3---0h2p0---|
|-----------------------------------3-|
|-------------------------------------|

|---!0-^0-------|-------------------------------|
|---!0-^0-------|-------------------------0---0-|
|---!2-^2-2-0-0-|-------2-------2-------2-0-0---|
|-0---------0-0-|-4p2p0---4p2p0---4p2p0---2-----|
|-0-------------|-----------------0-------3-----|
|---------------|-------------------------------|

|------------------------------|------------------------------|
|----------------------------0-|------------------------------|
|-------2-------2--------------|-------2-------2-------2----0-|
|-4p2p0---4p2p0---4p2p0-2-2----|-4p2p0---4p2p0---4p2p0---2----|
|-----------------0-------3----|-----------------0-------3----|
|------------------------------|------------------------------|

|----------------------------------------|
|-------------------------------------0--|
|-----------------------------0h2p0---0--|
|-0h2p0---0-2-3-0h2p0---0-2-3-------3----|
|-------3-------------3------------------|
|----------------------------------------|

|---0-------0-------0-(0)-----0-|-----------------0---------------0-|
|---0---------------0-(0)-------|---------0---------------0---------|
|---2---2-------2---2-(2)-x-----|-----0-------0-------0-------0-----|
|---0-----0-------0---------0---|-------5-------5-------5-------5---|
|-------------------------------|-----------------------------------|
|-0---0-------0-----------------|---5-------5-------5-------5-------|


"""

example_output = convert_tab_input(tab_input_example)
print(tab_input_example, example_output)
